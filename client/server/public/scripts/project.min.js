function webaudioTool(){if(!("audio_context"in window)){var e=window.AudioContext||window.webkitAudioContext||false;window.audio_context=new e}logConsole("Audio is starting up ...");var i=16384;var t=null,n=null,o=null,r=null,s=null,a=null;if(!navigator.getUserMedia)navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(navigator.getUserMedia){navigator.getUserMedia({audio:true},function(e){d(e)},function(e){alert("Error capturing audio.")})}else{alert("getUserMedia not supported in this browser.")}function c(e,i,t){var n=e.length;var o=0;var r=i;console.log("__________ "+t);for(;o<r&&o<n;o+=1){console.log(e[o])}}function l(e){var i,t,n,o;o=e.inputBuffer.getChannelData(0);c(o,5,"from getChannelData")}function d(e){o=window.audio_context.createGain();o.connect(window.audio_context.destination);n=window.audio_context.createMediaStreamSource(e);n.connect(o);r=window.audio_context.createScriptProcessor(i,1,1);r.onaudioprocess=l;n.connect(r);document.getElementById("volume").addEventListener("change",function(){var e=this.value;o.gain.value=e;console.log("curr_volume ",e)});s=window.audio_context.createScriptProcessor(2048,1,1);s.connect(o);a=window.audio_context.createAnalyser();a.smoothingTimeConstant=0;a.fftSize=2048;n.connect(a);a.connect(s);s.onaudioprocess=function(){var e=new Uint8Array(a.frequencyBinCount);a.getByteFrequencyData(e);var i=mode(e,e.length);var t=mode(e,25);var o=getAverageVolume(e);if(n.playbackState==n.PLAYING_STATE){updateVTP(o,t,i);console.log(JSON.stringify($("meta[name=vtp]").data()))}}}}function filterEcho(e,i){function t(e){var i=e.current_words;var n=e.previous_words;var o=e.cleaned_words;if(!i.length){return e}else{var r=n.indexOf(i[-1]);if(r==-1){o.unshift(i[-1]);i.splice(-1,1);t({current_words:i,previous_words:n,cleaned_words:o})}else{if(i.length==1){i.splice(0,1);t({current_words:i,previous_words:n,cleaned_words:o})}else if(r==0){i.splice(0,1);for(var s=0;s<i.length;s++){o.unshift(i[-1]);i.splice(-1,1)}t({current_words:i,previous_words:n,cleaned_words:o})}else{n.splice(r,n.length-r);prior_index=n.indexOf(i[-2]);if(prior_index==-1){i.splice(-1,1);t({current_words:i,previous_words:n,cleaned_words:o})}else{n.splice(prior_index,n.length-prior_index);i.splice(-1,1);t({current_words:i,previous_words:n,cleaned_words:o})}}}}}var n={current_words:e.split(" "),previous_words:i.split(" "),cleaned_words:[]};n=t(n);return n.cleaned_words}function timestampTranscription(e,i){var t=[];var n=0;var o=0;var r=false;var s=e.split(" ");for(var a=0;a<s.length;a++){for(var c=n;c<i.length;c++){var l=i[c].text.split(" ");for(var d=o;d<l.length;d++){if(s[a]==l[d]){t.push({t:s[a],dt:i[c].dt});n=c;o=d;r=true;break}else if(c+1==i.length){for(var p=0;p<i.length;p++){var u=i[p].text.split(" ");for(var f=0;f<u.length;f++){if(s[a]==u[f]){t.push({t:s[a],dt:i[p].dt});n=p;o=f}else{t.push({t:s[a],dt:$.now()/1e3})}r=true;break}if(r){break}}if(r){break}}}if(r){r=false;break}}}var g=0;var v=0;for(var a=0;a<t.length;a++){if(t[a].dt==v){g+=1e-6;t[a].dt=v+g}else{g=0;v=t[a].dt}}return t}function startSpeechRecognition(e,i=null,t="text",n=null){if(!window.hasOwnProperty("webkitSpeechRecognition")){logConsole("webkitSpeechRecognition not supported by device")}else{if(!("speech_recognition_client"in window)){window.speech_recognition_client=new webkitSpeechRecognition;window.speech_recognition_properties={timestamp:0,speech_in_progress:false,parsing_in_progress:false,transcribed_text:"",transcribed_markup:[],interim_text:"",interim_array:[],interim_callback:i,final_callback:e,filter_callable:n}}window.speech_recognition_client.continuous=true;window.speech_recognition_client.interimResults=true;window.speech_recognition_client.onstart=function(){window.speech_recognition_properties.parsing_in_progress=true};window.speech_recognition_client.onresult=function(e){if("speech_recognition_properties"in window){window.speech_recognition_properties.speech_in_progress=true;if(!window.speech_recognition_properties.timestamp){window.speech_recognition_properties.timestamp=e.timeStamp}if(e.results.length){var i=e.results[0][0].transcript;window.speech_recognition_properties.interim_text=i;window.speech_recognition_properties.interim_array.push({text:i,dt:$.now()/1e3});if(t=="timestamp"){var n=timestampTranscription(i,window.speech_recognition_properties.interim_array)}else{var n=i}if(window.speech_recognition_properties.interim_callback){window.speech_recognition_properties.interim_callback(n)}}for(var o=e.resultIndex;o<e.results.length;++o){var r=e.results[o][0].transcript;if(e.results[o].isFinal){if(t=="timestamp"){var s=timestampTranscription(r,window.speech_recognition_properties.interim_array);window.speech_recognition_properties.transcribed_markup=s}else{var s=r}if(window.speech_recognition_properties.filter_callable){r=window.speech_recognition_properties.filter_callable(s)}if(window.speech_recognition_properties.final_callback){window.speech_recognition_properties.final_callback(s)}window.speech_recognition_properties.transcribed_text=r;window.speech_recognition_properties.interim_text="";window.speech_recognition_properties.interim_array=[];if("speech_recognition_client"in window){window.speech_recognition_client.stop()}}}}};window.speech_recognition_client.onerror=function(e){logConsole("Error transcribing speech: "+e.error)};window.speech_recognition_client.onend=function(e){if("speech_recognition_properties"in window){window.speech_recognition_properties.speech_in_progress=false;if("speech_recognition_on"in window){window.speech_recognition_client.start()}}};window.speech_recognition_client.start();window.speech_recognition_on=true;window.speech_recognition_reset=setInterval(function(){if(window.speech_recognition_properties.speech_in_progress==false){if("speech_recognition_client"in window){window.speech_recognition_client.stop()}}},1e4)}}function stopSpeechRecognition(){if("speech_recognition_reset"in window){clearInterval(window.speech_recognition_reset)}if("speech_recognition_on"in window){delete window.speech_recognition_on}if("speech_recognition_properties"in window){delete window.speech_transcription_properties}if("speech_recognition_client"in window){window.speech_recognition_client.stop();delete window.speech_recognition_client}}function startSpeechTranscription(e,i=null,t="text",n=null,o=null){if(!window.hasOwnProperty("webkitSpeechRecognition")){logConsole("webkitSpeechRecognition not supported by device")}else{if(!("speech_transcription_properties"in window)){window.speech_transcription_properties={timestamp:0,speech_in_progress:false,parsing_in_progress:false,transcribed_text:"",transcribed_markup:[],interim_text:"",interim_array:[],interim_callback:i,final_callback:e,filter_callable:n}}if(!("speech_transcription_client"in window)){window.speech_transcription_client=new webkitSpeechRecognition}window.speech_transcription_client.continuous=true;window.speech_transcription_client.interimResults=true;window.speech_transcription_client.onstart=function(){window.speech_transcription_properties.parsing_in_progress=true};window.speech_transcription_client.onresult=function(e){if("speech_transcription_properties"in window){window.speech_transcription_properties.speech_in_progress=true;if(!window.speech_transcription_properties.timestamp){window.speech_transcription_properties.timestamp=e.timeStamp}if(e.results.length){var i=e.results[0][0].transcript;window.speech_transcription_properties.interim_text=i;window.speech_transcription_properties.interim_array.push({text:i,dt:$.now()/1e3});if(t=="timestamp"){var n=timestampTranscription(i,window.speech_transcription_properties.interim_array)}else{var n=i}if(window.speech_transcription_properties.interim_callback){window.speech_transcription_properties.interim_callback(n)}}for(var o=e.resultIndex;o<e.results.length;++o){var r=e.results[o][0].transcript;if(e.results[o].isFinal){if(t=="timestamp"){var s=timestampTranscription(r,window.speech_transcription_properties.interim_array);window.speech_transcription_properties.transcribed_markup=s}else{var s=r}if(window.speech_transcription_properties.filter_callable){r=window.speech_transcription_properties.filter_callable(s)}if(window.speech_transcription_properties.final_callback){window.speech_transcription_properties.final_callback(s)}window.speech_transcription_properties.transcribed_text=r;window.speech_transcription_properties.interim_text="";window.speech_transcription_properties.interim_array=[];if("speech_transcription_client"in window){window.speech_transcription_client.stop()}}}}};window.speech_transcription_client.onerror=function(e){logConsole("Error transcribing speech: "+e.error);if(o){o(e.error)}};window.speech_transcription_client.onend=function(e){if("speech_transcription_properties"in window){window.speech_transcription_properties.speech_in_progress=false;if("speech_transcription_on"in window){window.speech_transcription_client.start()}}};window.speech_transcription_client.start();window.speech_transcription_on=true;window.speech_transcription_reset=setInterval(function(){if(window.speech_transcription_properties.speech_in_progress==false){if("speech_transcription_client"in window){window.speech_transcription_client.stop()}}},1e4)}}function stopSpeechTranscription(){if("speech_transcription_reset"in window){clearInterval(window.speech_transcription_reset)}if("speech_transcription_on"in window){delete window.speech_transcription_on}if("speech_transcription_properties"in window){delete window.speech_transcription_properties}if("speech_transcription_client"in window){window.speech_transcription_client.stop();delete window.speech_transcription_client}}function playAudio(e,i,t=.5,n=true){if(!("audio_context"in window)){var o=window.AudioContext||window.webkitAudioContext;window.audio_context=new o}if(!("volume_level"in window)){window.volume_level=window.audio_context.createGain()}var r=["audio/mpeg","audio/wav","audio/ogg"];if(r.indexOf(ingestString(i))==-1){logConsole("content_type must be one of "+JSON.stringify(r))}if(typeof t!="number"){t=1}else if(ingestNumber(t)<0||ingestNumber(t)>1){t=1}function s(e,o,r,s){var a="data:"+i+";base64,"+r;var c=new XMLHttpRequest;c.open("GET",a);c.responseType="arraybuffer";c.onload=function(){e.decodeAudioData(c.response,function(i){var r=i;var s=e.createBufferSource();s.buffer=r;o.gain.value=t;s.connect(o);o.connect(e.destination);if(n){if("speech_recognition_client"in window){s.onended=function(e){window.speech_recognition_on=true;window.speech_recognition_client.start()};delete window.speech_recognition_on;window.speech_recognition_client.stop()}if("speech_transcription_client"in window){s.onended=function(e){window.speech_transcription_on=true;window.speech_transcription_client.start()};delete window.speech_transcription_on;window.speech_transcription_client.stop()}}s.start(0)})};c.send()}s(window.audio_context,window.volume_level,e,i)}function streamAudio(e){}function synthesizeSpeech(e,t="Nicole",n=null){if(!("audio_context"in window)){var o=window.AudioContext||window.webkitAudioContext;window.audio_context=new o}function r(e,t){var n=new ArrayBuffer(t.length);var o=new Uint8Array(n);for(i=0;i<t.length;i++){o[i]=t[i]}e.decodeAudioData(n,function(i){buf=i;var t=e.createBufferSource();t.buffer=buf;t.connect(e.destination);t.start(0)})}var s=["Geraint","Gwyneth","Mads","Naja","Hans","Marlene","Nicole","Russell","Amy","Brian","Emma","Raveena","Ivy","Joanna","Joey","Justin","Kendra","Kimberly","Matthew","Salli","Conchita","Enrique","Miguel","Penelope","Chantal","Celine","Mathieu","Dora","Karl","Carla","Giorgio","Mizuki","Liv","Lotte","Ruben","Ewa","Jacek","Jan","Maja","Ricardo","Vitoria","Cristiano","Ines","Carmen","Maxim","Tatyana","Astrid","Filiz","Vicki","Takumi"];if(s.indexOf(ingestString(t))==-1){logConsole("voice_id must be one of "+JSON.stringify(s))}var a=ingestMap(aws_polly_cred);var c={accessKeyId:a.aws_polly_access_key_id,secretAccessKey:a.aws_polly_secret_access_key,region:a.aws_polly_default_region};var l=new AWS.Polly(c);var d={OutputFormat:"mp3",Text:text_message,TextType:"text",VoiceId:t};l.synthesizeSpeech(d,function(e,i){if(e){logConsole("Error synthesizing speech:"+e)}else{r(window.audio_context,i.AudioStream)}})}function synthesizeSpeechChrome(e){default_lang="en-US";logConsole(default_lang);if(default_lang){if("speechSynthesis"in window){if("SpeechSynthesisUtterance"in window){var i=new SpeechSynthesisUtterance;i.text=e;i.volume=1;i.lang=default_lang;i.rate=1;i.pitch=1;i.onstart=function(){console.log("Synthesis Started")};i.onpause=function(){console.log("Synthesis Paused")};i.onresume=function(){console.log("Synthesis Resumed after Pause")};i.onend=function(){console.log("Synthesis Stopped")};logConsole("synthesis attempt");speechSynthesis.speak(i)}}}}function logConsole(e){verbose=false;if("system_environment"in window){if(window.system_environment=="dev"||window.system_environment=="tunnel"){verbose=true}}if(e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"){if(verbose){console.log(e)}}else if($.isArray(e)||typeof e=="object"){if(verbose){console.log(JSON.stringify(e))}}else if(verbose){try{console.log(JSON.stringify(e))}catch(e){}}}function deepCopy(e){if(e==null||typeof e!="object"){return e}else{var i=e.constructor();for(var t in e){if(e.hasOwnProperty(t))i[t]=e[t]}return i}}function ingestString(e){var i="";if(typeof e!="string"){return i}else if(e==="undefined"){return i}return e}function ingestMap(e){var i={};if(e==null||typeof e=="undefined"){return i}else if(typeof e!="object"){return i}else if($.isArray(e)){return i}else if(!mapSize(e)){return i}return e}function ingestBoolean(e){var i=false;if(e==null||typeof e=="undefined"){return i}else if(typeof e!="boolean"){return i}return e}function ingestInteger(e){var i=0;if(e==null||typeof e=="undefined"){return i}else if(typeof e!="number"||!(Math.floor(e)===e)){return i}return e}function ingestNumber(e){var i=0;if(e==null||typeof e=="undefined"){return i}else if(typeof e!="number"){return i}return e}function ingestArray(e){var i=[];if(e==null||typeof e=="undefined"){return i}else if(!$.isArray(e)){return i}return e}function isMap(e){if(e==null||typeof e=="undefined"){return false}else if(typeof e!="object"){return false}else if($.isArray(e)){return false}return true}function isFunction(e){if(e==null||typeof e=="undefined"){return false}else if({}.toString.call(e)!="[object Function]"){return false}return true}function mapSize(e){var i=0;$.each(e,function(e,t){i++});return i}function deleteObject(e){for(var i in e){if(e.hasOwnProperty(i)){e[i]=null;delete e[i]}}e=null}function sortArray(e,i){var t=ingestArray(e);var n=ingestArray(i);if(t.length){for(var o=0;o<n.length;o++){var r=ingestMap(t[0]);for(var s in ingestMap(n[o])){if(s in r){if(ingestString(n[o][s])){t.sort(function(e,i){if(i[s]>e[s]){return 1}else if(i[s]<e[s]){return-1}else{return 0}})}else{t.sort(function(e,i){if(e[s]>i[s]){return 1}else if(e[s]<i[s]){return-1}else{return 0}})}}else{throw"sort_criteria["+o.toString()+"]."+s+" is not a field in the objects of the array."}}}}return t}function filterArray(e,i,t=0){var n=[];var o=ingestArray(e);i=ingestMap(i);for(var r=0;r<o.length;r++){var s=true;var a=ingestMap(o[r]);for(var c in i){if(!(c in a)){if("value_exists"in i[c]){if(!i[c]["value_exists"]){continue}}s=false;break}for(var l in i[c]){if(l=="value_exists"){if(!i[c][l]){if(c in a){s=false;break}}}if(l=="equal_to"){if(i[c][l]!=o[r][c]){s=false;break}}}if(!s){break}}if(s){n.push(o[r]);if(ingestInteger(t)){if(n.length>=t){break}}}}return n}function capitalizeString(e,i=false){var t=ingestString(e);if(i){t=t.replace(/_/g," ")}var n=t.replace(/\b\w/g,function(e){return e.toUpperCase()});return n}function injectLinks(e,i=true){function t(e){var t='<a href="'+e+'" target="_blank">'+e+"</a>";if(i){var n='<link rel="dns-prefetch" href="'+e+'">';$("head").append(n)}return t}var n=e.replace(/https?:\/\/.*?(\s|,|$)/g,t);return n}function unpackKwargs(e,i,t){if(typeof e==="undefined"){e={}}for(var n in i){var o="error unpacking "+t+": ";try{if(n in e){if(typeof e[n]===typeof i[n]){i[n]=e[n]}else{o+=n+" must be a "+typeof i[n]+".";logConsole(o)}}}catch(e){o+=n+" failed to unpack.";logConsole(o)}}}function convertElement(e,i){var t=$(e)[0].tagName.toLowerCase();var n="<"+i+"></"+i+">";var o=$(n);$(e).each(function(){$.each(this.attributes,function(){if(this.specified){o.attr(this.name,this.value)}})});o.html($(e)[0].innerHTML);if(i=="a"){o.attr("href","#")}else if(t=="a"){o.removeAttr("href")}$(e).replaceWith(o)}function toggleStyle(e,i){var t=new RegExp(i,"i");var n=$(e);if(typeof n.attr("style")==="undefined"){n.attr("style",i)}else if(!t.test(n.attr("style"))){var o=n.attr("style")+" "+i;n.attr("style",o)}else{var o=n.attr("style").replace(i,"");if(o){n.attr("style",o)}else{n.removeAttr("style")}}}function retrieveParams(){var e={};var i=window.location.search.substring(1);var t=i.split("&");for(var n=0;n<t.length;n++){var o=t[n].split("=");e[o[0]]=decodeURIComponent(o[1])}if(e){if(window.history.pushState){var r=ingestString(window.page_url);var s=ingestString(window.app_title);if(!r){r="/"}if(!s){s="Landing Page"}window.history.pushState({state:"dummy state"},s,r)}}return e}function autofocusEnd(e){$(e).focus(function(){if(this.setSelectionRange){var e=$(this).val().length;this.setSelectionRange(e,e)}else{$(this).val($(this).val())}})}function bindFunction(e,i,t,n=""){if($(e).length){var o=window[i];t=ingestArray(t);if(typeof o=="undefined"){logConsole(sprintf("Function %s is not in the scope.",i))}else{if(t.length){$(e).click(function(){o(...t)})}else{$(e).click(function(){o()})}}}}function unbindListener(e,i=false){if("client_triggers"in window){if(e in window.client_triggers){if(i){for(key in window.client_triggers[e]){if($(key).length){$(key).off()}}}else{if($(e).length){$(e).off()}}delete window.client_triggers[e]}}}function clearListeners(){if("client_triggers"in window){for(key in window.client_triggers){if(ingestBoolean(window.client_triggers[key])){if($(key).length){$(key).off()}}else{const e=ingestMap(window.client_triggers[key]);for(k in e){if($(k).length){$(k).off()}}}}window.client_triggers={}}}function updateHistory(e,i=null){if(!"client_history"in window){window.client_history=[]}if(window.client_history.length>49){window.client_history.shift()}window.client_history.push({func:e,args:i})}function callFunction(e,i=null){i=ingestArray(i);if(typeof e=="string"){var t=window[e];if(typeof t=="undefined"){logConsole("Function "+e+" is not in the global scope.")}else if(i.length){t(...i)}else{t()}}else if(i.length){e(...i)}else{e()}}function getFile(e){var i=new $.Deferred;var t=new XMLHttpRequest;t.onload=function(e){if(this.status==200){var t=new FileReader;t.readAsDataURL(this.response);t.onloadend=function(){i.resolve(t.result)}}else{i.reject()}};t.open("GET",e);t.responseType="blob";t.send();return i.promise()}function errorConstructor(e,i){var t=e.status;var n={};try{n=JSON.parse(e.responseText)}catch(e){}var o="Errr! ";if(t===0){o+="No connection. Check network settings.";window.device_online=false}else if(t==404){o+="Page not found. [404]"}else if(t==500){o+="Internal Server Error [500]."}else if(i==="timeout"){o+="Request timeout."}else if(i==="abort"){o+="Request aborted."}else if(mapSize(ingestMap(n))){if(ingestString(n.error)){o+=n.error}}console.log(o);return o}function toggleView(e,i){if(e.indexOf("#")!=0){e="#"+e}$("#content").children().each(function(){$(this).hide()});if(!$(e).length){$("#content").append(i)}else{$(e).show()}}function scrollDiv(e){if(e){var i="#"+e;if($(i).length){var t=$("#header_container").css("height");var n=parseInt(t.slice(0,-2));var o=$(i).offset().top-n;$("html, body").animate({scrollTop:o},1)}}else{$("html, body").animate({scrollTop:0},1)}}function flexibleDialog(e=null){var i=ingestMap(e);var t=ingestString(i.title);var n=ingestString(i.body);var o=ingestBoolean(i.keep_open);var r=sprintf('        <div id="flexible_dialog_box" class="dialog-flexible">            <div class="container-fluid">                <div class="row navbar">                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">                        <div id="flexible_dialog_title" class="navbar-title-24 navbar-center">%s</div>                    </div>                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">                        <div class="navbar-title-24 navbar-end">                            <a id="flexible_dialog_close" title="Close Button" class="icon-close font-sm float-middle"></a>                        </div>                    </div>                </div>            </div>            <div id="flexible_dialog_body" class="container-fluid margin-bottom-10">%s</div>        </div>',t,n);var s="#flexible_dialog_box";var a="#flexible_dialog_title";var c="#flexible_dialog_close";var l="#flexible_dialog_body";var d="#dialog_backdrop";if($(s).length){$(s).remove()}$(d).show();$("body").append(r);function p(){$(d).hide();$(s).remove()}if(o){$(c).click(p)}else{$(s).find("a").each(function(e,i){$(i).click(p)})}$(d).click(p)}function blockquoteDialog(e){var i={schema:{title:"Mission",description:"Statement of purpose for the laboratory.",effective_date:"2016.05.31.13.45.55",details:"To make accessible to each individual the resources of the world.",author:"Collective Acuity"},metadata:{example_statements:["display the lab mission"]}};var t=i.schema;unpackKwargs(e,t,"blockquoteDialog");var n=t.title;var o=n.toLowerCase().replace(/\s/g,"_");var r=t.description;var s=t.details;var a=t.author;var c=sprintf('        <div id="%s_details" class="font-sm text-left" title="%s">            <blockquote class="blockquote-reverse">                <p>%s</p>                <footer>%s</footer>            </blockquote>        </div>',o,r,s,a);var l={title:n,body:c};flexibleDialog(l)}function slideoutDialog(e,i){var t="#dialog_backdrop_slideout";var n=e;var o=e+" a";var r="slideout-"+i;var s="slideback-"+i;$(t).show();$(n).show();$(n).addClass(r);function a(){$(t).hide();$(t).off();$(n).removeClass(r);$(n).addClass(s);setTimeout(function(){$(n).hide();$(n).removeClass(s)},150)}$(o).click(function(){a()});$(t).click(function(){a()})}function menuBindings(e){const i=ingestArray(e.sections);for(var t=0;t<i.length;t++){const e=ingestArray(i[t].actions);for(var n=0;n<e.length;n++){const i=ingestString(e[n].name).toLowerCase().replace(/\s/g,"_");if(i){var o=ingestString(e[n].onclick);var r=ingestArray(e[n].args);var s="#menu_action_"+i+"_link";bindFunction(s,o,r)}}}}function requestingResource(e){var i=new $.Deferred;function t(e){logConsole("Request Successful.");window.device_online=true;i.resolve(e)}function n(e,t){const n=errorConstructor(e,t);i.reject(n)}function o(){console.log("Waiting...")}var r=ingestString(e.route);var s=ingestMap(e.params);var a=window.server_url+r;if(mapSize(s)){a+="?";a+=$.param(s)}var c=ingestString(e.method);var l={method:c,timeout:12e3,crossDomain:true,headers:{},url:a,contentType:"application/json",success:t,error:n};if(isFunction(e.success)){l.success=e.success}if(isFunction(e.error)){l.error=e.error}var d=ingestMap(e.body);if(mapSize(d)&&c!="GET"){l.data=JSON.stringify(d)}var p=ingestMap(e.headers);for(var u in p){l.headers[u]=p[u]}$.ajax(l);if(isFunction(e.wait)){e.wait()}else{o()}return i.promise()}function updateConversation(e,i,t="",n="",o=10){var r=new $.Deferred;var s=$(e);if(s.length){if(!t){if(ingestString(n)){logConsole(n+": "+i);t=sprintf('                    <div class="row auto-height">                        <div class="col-xs-10">                            <div class="form-line italic font-text text-wrap">%s: %s</div>                        </div>                    </div>',n,i)}else{logConsole("me: "+i);t=sprintf('                    <div class="row auto-height">                        <div class="col-xs-2"><div class="form-line">&nbsp;</div></div>                        <div class="col-xs-10">                            <div class="form-line text-right font-text text-wrap italic font-faded">%s</div>                        </div>                    </div>',i)}}setTimeout(function(){$(t).appendTo(s).hide().fadeIn(600);var e=$("#dialog_chat").offset().top;s.children().each(function(){const i=$(this).offset().top;if(i-e<0){$(this).remove()}else if($("#dialog_chat").is(":visible")){if(i-e<50){$(this).fadeTo(600,.33)}else if(i-e<100){$(this).fadeTo(600,.66)}}});r.resolve()},600)}return r.promise()}function showMessage(e){var i={anchor_selector:"#header_middle",message_text:"Status Message",message_html:"",message_status:"success",message_location:"bottom",timeout:0};unpackKwargs(e,i,"showMessage");var t=i.anchor_selector;var n=i.message_text;var o=i.message_status;var r=i.message_location;var s=i.message_html;var a=i.timeout;var c=$(t).offset();var l=$(t).width();var d=$(t).height();var p=$("html, body").scrollTop();var u="dialog_status_message_"+t.replace("#","").toLowerCase();var f="#"+u;if($(f).length){$(f).remove()}var g='<div id="'+u+'" style="display: none;"></div>';var v=["dialog-tooltip","padding-vertical-5","padding-horizontal-5","font-mini","text-wrap"];if(o=="success"){v.push("font-success")}else if(o=="error"){v.push("font-error")}if(s){v.push("page-tooltip")}else{v.push("page-status-message")}var _=v.join(" ");$("body").append(g);var h=$(f);h.addClass(_);if(s){h.html(s)}else{h.text(n)}if(r=="bottom"){var w=h.width();var m=h.css("padding-top");var m=parseFloat(m.replace(/[^-\d\.]/g,""));var b=c.top+d+m-p;var y=c.left+l/2-w/2}else if(r=="top"){var w=h.width();var x=h.height();var k=h.css("padding-bottom");var k=parseFloat(k.replace(/[^-\d\.]/g,""));var b=c.top-x-k*3-p;var y=c.left+l/2-w/2}else if(r=="right"){var m=h.css("padding-top");var m=parseFloat(m.replace(/[^-\d\.]/g,""));var S=h.css("padding-right");var S=parseFloat(S.replace(/[^-\d\.]/g,""));var b=c.top-m-p;var y=c.left+l+S}else if(r=="left"){var w=h.width();var m=h.css("padding-top");var m=parseFloat(m.replace(/[^-\d\.]/g,""));var S=h.css("padding-right");var S=parseFloat(S.replace(/[^-\d\.]/g,""));var b=c.top-m-p;var y=c.left-w-S*2.5}else{var w=h.width();var m=h.css("padding-top");var m=parseFloat(m.replace(/[^-\d\.]/g,""));var b=c.top-m;var y=c.left+l/2-w/2}var C=$(window).width();if(y<0){y=0}if(y+w>C){y=C-w}h.css({top:b,left:y});if(a){setTimeout(function(){h.fadeOut()},a)}h.fadeIn()}function hideMessage(e){var i="#dialog_status_message_"+e.replace("#","").toLowerCase();$(i).hide()}function inputValidator(e,i){var t=ingestMap(i.must_contain);var n=ingestMap(i.must_not_contain);var o=ingestMap(i.identical_to);var r=ingestMap(i.equal_to);var s=ingestNumber(i.max_length);var a="";var c="";for(var l in t){var d=new RegExp(l,"i");if(!d.test(e)){a=t[l];break}}for(var l in o){if(!$(l).length){logConsole(l+" is not a valid selector.")}else if($(l).val()!=e){a=o[l];break}}for(var l in r){if(l!=e){a=r[l];break}}for(var l in n){var d=new RegExp(l,"i");if(d.test(e)){c=n[l];break}}if(s){if(e.length>s){c="contain contain more than "+s.toString()+" characters."}}return{required:a,prohibited:c}}function submitValidator(e,i,t,n,o=""){var r=inputValidator(e,t);var s={anchor_selector:n,message_text:"Status Message",message_status:"error",message_location:"bottom"};if(r.prohibited){var a="Oops! ";if(!i){a+="Input "}else if(o){a+=o+" "+r.required}else{a+=i+" "}a+=r.prohibited;s.message_text=a;showMessage(s);return null}else if(r.required){var a="Errr! ";if(!e){a+=i+" cannot be empty."}else if(o){a+=o+" "+r.required}else{a+='"'+e+'" '+r.required}s.message_text=a;showMessage(s);return null}else{return e}}function inputHandler(e,i,t,n,o=true,r=true,s=""){$(e).keypress(function(e){var i=e.keyCode;if(i===10||i===13){e.preventDefault()}});$(e).keyup(function(r){var a=r.keyCode;if($(this).get(0).isContentEditable){var c=$(this).text()}else{var c=$(this).val()}var l=inputValidator(c,t);var d={anchor_selector:e,message_text:"Status Message",message_status:"error",message_location:"bottom"};if(l.prohibited){var p="Oops! ";if(!i){p+="Input "}else{p+=i+" "}p+=l.prohibited;d.message_text=p;showMessage(d)}else if((a==10||a==13)&&o){if(l.required){var p="Errr! ";if(!c){p+=i+" cannot be empty."}else if(s){p+=s+" "+l.required}else{p+='"'+c+'" '+l.required}d.message_text=p;showMessage(d)}else{n(c)}}else{hideMessage(e)}});if(r){$(e).focusout(function(o){if($(this).get(0).isContentEditable){var r=$(this).text()}else{var r=$(this).val()}var a=submitValidator(r,i,t,e,s);if(a===null){}else{n(a)}})}}function statusIconHandler(e,i,t){$(e).keyup(function(){if($(this).get(0).isContentEditable){var e=$(this).text()}else{var e=$(this).val()}console.log(e);var n=inputValidator(e,t);if(e==""){$(i).hide()}else if(n.required||n.prohibited){$(i).show()}else{$(i).hide()}})}function statusButtonHandler(e,i,t,n,o,r,s=""){function a(){$(t).click(function(){var i=$(e).val();var t=submitValidator(i,n,o,e,s);if(t===null){}else{r(t)}})}$(e).keyup(function(e){if($(this).get(0).isContentEditable){var n=$(this).text()}else{var n=$(this).val()}var r="a";if($(t).length){r=$(t)[0].tagName.toLowerCase()}var s=inputValidator(n,o);if(n==""){$(i).hide();if(r=="span"){convertElement(t,"a");a()}}else if(s.required||s.prohibited){$(i).show();if(r=="a"){convertElement(t,"span")}}else{$(i).hide();if(r=="span"){convertElement(t,"a");a()}}});a()}function successMessage(e,i,t){try{var n=JSON.parse(e)}catch(e){var n={}}var o=n.status;var r=n.message;var s=n.status;var a="<p>"+n.message+"</p>";if(typeof i==="string"){if(typeof t!="string"){var t=""}showMessage(i,r,o,t,2e3)}else{$("#dialog_middle_center_header_title").text(s);$("#dialog_middle_center_content_middle").html(a);openDialog("#dialog_middle_center")}}function errorMessage(e,i,t,n){var o=e.status;try{var r=JSON.parse(e.responseText)}catch(e){var r={}}var s="Errr! ";if(o===0){s+="No connection. Check network settings."}else if(o==404){s+="Page not found. [404]"}else if(o==500){s+="Internal Server Error [500]."}else if(i==="timeout"){s+="Request timeout."}else if(i==="abort"){s+="Request aborted."}if(typeof r.status==="string"){var a=r.status;var c=r.status}else{var a="error";var c=o}if(typeof r.message==="string"){var s=r.message;var l="<p>"+r.message+"</p>"}else{var l="<p>"+s+"</p>"}if(typeof t==="string"){if(typeof n!="string"){var n=""}showMessage(t,s,a,n)}else{$("#dialog_middle_center_header_title").text(c);$("#dialog_middle_center_content_middle").html(l);openDialog("#dialog_middle_center")}}function waitMessage(e,i,t,n){if(typeof t==="undefined"){var t=""}if(typeof n==="undefined"){var n="overlay"}var o="dialog_status_message_"+e.replace("#","").toLowerCase();var r="#"+o;var s=new String(i);var a=i.length;for(var c=0;c+a<a*2;c++){s+="&nbsp;"}showMessage(e,s,t,n);function l(e){var i=e.length;var t=new String(e);var n=$(r);function o(r){if(!(r%i)){t=new String(e)}else{t+="."}var s=new String(t);var a=t.length;for(var c=0;c+a<i*2;c++){s+="&nbsp;"}n.html(s);setTimeout(function(){if(n.is(":visible")){o(++r)}},125)}o(0)}l(i)}function VisibilityListener(e=null){var i="hidden";if(i in document){document.addEventListener("visibilitychange",t)}else if((i="mozHidden")in document){document.addEventListener("mozvisibilitychange",t)}else if((i="webkitHidden")in document){document.addEventListener("webkitvisibilitychange",t)}else if((i="msHidden")in document){document.addEventListener("msvisibilitychange",t)}else if("onfocusin"in document){document.onfocusin=document.onfocusout=t}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t}function t(t){var n="visible";var o="hidden";var r={focus:n,focusin:n,pageshow:n,blur:o,focusout:o,pagehide:o};t=t||window.event;if(t.type in r){document.body.className=r[t.type]}else{document.body.className=this[i]?"hidden":"visible"}if(e){e(document.body.className)}}if(document[i]!==undefined){t({type:document[i]?"blur":"focus"})}}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(e){for(var i=0;i<e.length;i++){var t=e[i].string;this.versionSearchString=e[i].subString;if(t.indexOf(e[i].subString)!==-1){return e[i].identity}}},searchVersion:function(e){var i=e.indexOf(this.versionSearchString);if(i===-1){return}var t=e.indexOf("rv:");if(this.versionSearchString==="Trident"&&t!==-1){return parseFloat(e.substring(t+3))}else{return parseFloat(e.substring(i+this.versionSearchString.length+1))}},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"MS Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}]};function syntaxHighlight(e){if(typeof e!="string"){e=JSON.stringify(e,undefined,2)}e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var i="number";if(/^"/.test(e)){if(/:$/.test(e)){i="key"}else{i="string"}}else if(/true|false/.test(e)){i="boolean"}else if(/null/.test(e)){i="null"}return'<span class="'+i+'">'+e+"</span>"})}function registerHandler(e,i){var t;var n;$(e).keypress(function(e){t=e.keyCode;if(t===10||t===13){e.preventDefault()}});$(e).keyup(function(e){t=e.keyCode;if($(this).get(0).isContentEditable){n=$(this).text()}else{n=$(this).val()}if(t==10||t==13){i(n)}});$(e).focusout(function(e){if($(this).get(0).isContentEditable){n=$(this).text()}else{n=$(this).val()}i(n)})}function errorDialog(e){var i="";var t="";var n={invalid:new RegExp(/Access token is invalid/g),missing:new RegExp(/Access token is missing/g)};if(n.missing.test(e)){i="Token Missing";t='To access this content, an access token is required. You can register your access token, using the "Register Token" button in the menu panel.';openChat()}else if(n.invalid.test(e)){i="Token Invalid";t="The access token you have registered is not a valid token on record. Please double-check the value you have entered.";openChat()}else{i="Request Error";t=e}const o=sprintf('        <div class="col-xs-12 margin-vertical-10">            <div class="form-text auto-height text-wrap">%s</div>        </div>',t);var r={title:i,body:o};flexibleDialog(r)}function updateTitle(e){var i={schema:{app_title:"Origins Project",app_subtitle:"Food Provenance powered by Blockchain",page_title:"Origins Project",page_label:"Food Provenance powered by Blockchain",center_desktop:false},metadata:{example_statements:["update the title fields"]}};var t=i.schema;unpackKwargs(e,t,"updateTitle");var n=document.title.split(" : ");if(t.app_title){n[0]=t.app_title}if(t.app_subtitle){n[1]=t.app_subtitle}document.title=n.join(" : ");var o=["#header_title_desktop_text","#header_title_mobile_text"];for(var r=0;r<o.length;r++){header_id=o[r];if(!t.page_label){$(header_id).removeAttr("title")}else{$(header_id).attr("title",t.page_label)}$(header_id).text(t.page_title)}var s="#header_title_desktop";if(t.center_desktop){$(s).removeClass("navbar-start");$(s).addClass("navbar-center")}else{$(s).removeClass("navbar-center");$(s).addClass("navbar-start")}}function registerDialog(){var e=ingestString(localStorage.getItem("access_token"));var i="";if(e){i=' value="'+e+'"'}const t=sprintf('        <div class="form-line text-left">            <div class="col-xs-12 margin-bottom-10">                <div class="form-text auto-height text-wrap">Access Token:</div>            </div>            <div class="col-xs-12 margin-bottom-5">                <form title="Access Token">                    <div class="row">                        <div class="col-xs-12">                            <label for="access_token_input" class="sr-only">Access Token</label>                            <input id="access_token_input" type="text" autofocus class="form-input"%s>                        </div>                    </div>                </form>            </div>        </div>',i);var n={title:"Register Token",body:t};flexibleDialog(n);const o="#dialog_backdrop";const r="#access_token_input";function s(e){localStorage.setItem("access_token",e);$(o).click()}registerHandler(r,s);autofocusEnd(r)}function openDocumentation(e=""){function i(i){openDashboard();var t={app_title:window.app_title,app_subtitle:"API Documentation",page_title:"API Documentation",page_label:"View API Documentation",center_desktop:true};updateTitle(t);var n="documentation";var o="#documentation_container";var r='<div id="documentation_container" class="container content-container-scroll"></div>';toggleView(o,r);const s=syntaxHighlight(JSON.stringify(i,undefined,2));const a='<pre class="text-wrap pre-json">'+s+"</pre>";$(o).html(a);scrollDiv(e)}var t=ingestString();requestingResource({route:"/api/v1",method:"GET"}).done(function(e){logConsole(e.schema);i(e)})}function openSources(e=""){function i(i=null){openDashboard();var t={app_title:window.app_title,app_subtitle:"Trusted Sources",page_title:"Trusted Sources",page_label:"Edit Trusted Sources",center_desktop:true};updateTitle(t);var n="sources";var o="#sources_container";var r='<div id="sources_container" class="container content-container-scroll"></div>';toggleView(o,r);$("#header_microphone").hide();$("#header_plus").show();$("#dialog_chat").hide();$("#microphone_button").off();var s='<section id="sources_section" class="section-last"></section>';const a=syntaxHighlight(JSON.stringify(i,undefined,2));const c='<pre class="text-wrap pre-json">'+a+"</pre>";$(o).html(c);scrollDiv(e)}var t=ingestString(localStorage.getItem("access_token"));requestingResource({route:"/sources",method:"GET",params:{token:t}}).done(function(e){logConsole(e);i(e.details)}).fail(function(e){errorDialog(e)})}function renderResponse(e){let i=e.details;let t=ingestString(i.msg);let n=ingestMap(i.audio);let o=ingestMap(i.content);var r="#dialog_chat_message_box";if(t){updateConversation(r,t,message_html="",bot_name="Origins")}if(mapSize(n)){playAudio(n.audio_data,n.content_type,n.volume_level)}function s(e,i,t){const n=e.slice(1);const o=ingestMap(t[i[0]]);const r=ingestMap(t[i[1]]);let s=sprintf('            <p class="form-label">Sources</p>            <p class="font-text">%s</p>            <p class="font-hyperlink no-wrap">%s</p>',o.name,o.web);if(i.length>1){s+=sprintf('                <p class="font-text">%s</p>                <p class="font-hyperlink no-wrap">%s</p>',r.name,r.web)}const a={anchor_selector:e,message_html:s,message_status:"normal",message_location:"top"};$(e).click(function(){showMessage(a)});const c="#dialog_status_message_"+n;setInterval(function(){$(c).click(function(){hideMessage(e)})},1e3)}if(mapSize(o)){let e=o.producer;let i=o.attesters;let t=sprintf('            <div id="verify_report" class="row auto-height column-border">                <div class="col-xs-12 margin-top-10">                    <div class="form-label">Brand</div>                </div>                <div class="col-xs-12">                    <div class="font-text">%s</div>                </div>                <div class="col-xs-12 margin-top-10">                    <div class="row auto-height">                        <div class="col-xs-8">                            <div class="form-label">Claims</div>                        </div>                        <div class="col-xs-4 text-right">                            <div class="form-label">Sources</div>                        </div>                    </div>                </div>                <div class="col-xs-12">                    <div class="row auto-height">                        <div class="col-xs-8">                            <div class="font-text text-wrap">%s</div>                        </div>                        <div class="col-xs-4 text-right">                            <a id="claim_a" class="font-green">2 of 3</a>                        </div>                    </div>                </div>                <div class="col-xs-12">                    <div class="row auto-height">                        <div class="col-xs-8">                            <div class="font-text text-wrap">%s</div>                        </div>                        <div class="col-xs-4 text-right">                            <a id="claim_b" class="font-gold">1 of 3</a>                        </div>                    </div>                </div>                <div class="col-xs-12 margin-bottom-10">                    <div class="row auto-height">                        <div class="col-xs-8">                            <div class="font-text text-wrap">%s</div>                        </div>                        <div class="col-xs-4 text-right">                            <a id="claim_c" class="font-red">0 of 3</a>                        </div>                    </div>                </div>            </div>',e.name,e.claims[0].desc,e.claims[1].desc,e.claims[2].desc);updateConversation(r,t,t).done(function(){s("#claim_a",e.claims[0].attest,i);s("#claim_b",e.claims[1].attest,i)})}}function toggleSpeech(e=true){var i="dialog_chat";var t="#dialog_chat_input_box";var n="#dialog_chat_submit_box";var o="#dialog_chat_message_box";var r="#"+i+"_transcript_box";var s=i+"_input";var a=i+"_submit";var c="#"+s+"_message_text";var l="#"+a+"_message_success";var d="#"+a+"_message_error";function p(){var e=sprintf('            <div id="%s_row" class="row">                <div id="%s_column" class="col-xs-12">                    <form id="%s_form" title="New Message">                        <div id="%s_form_row" class="row">                            <div id="%s_form_left" class="col-xs-12 auto-height">                                <textarea id="%s_message_text" placeholder="type message here..." class="form-input-textarea"></textarea>                            </div>                        </div>                    </form>                </div>            </div>',s,s,s,s,s,s);$(t).html(e);var i=sprintf('            <div id="%s_row" class="row">                <div id="%s_column" class="col-xs-1 text-right">                    <div id="%s_text" class="form-text">                        <span id="%s_message_error" class="icon-ban icon-error icon-overlay" style="display: none;"></span>                        <span id="%s_message_success" class="icon-arrow-right-circle icon-success"></span>                    </div>                </div>            </div>',a,a,a,a,a,a);$(n).html(i);$(c).focus();autosize($(c))}function u(e){requestingResource({route:"/query",method:"POST",body:{type:"message",text:e}}).done(function(e){logConsole(e);renderResponse(e)});updateConversation(o,e);$(c).val("");$(c).focus();autosize.update($(c))}function f(e){$(c).val(e);autosize.update($(c))}function g(e){requestingResource({route:"/query",method:"POST",body:{type:"speech",text:e}}).done(function(e){logConsole(e);renderResponse(e)});updateConversation(o,e);$(c).val("");autosize.update($(c))}if(e){logConsole("Speech started.");startSpeechRecognition(g,f);if(!$.trim($(t).html())){p();inputHandler(c,"Message",{},u,enter_submit=true,auto_save=false);statusButtonHandler(c,d,l,"Message",{},u)}else{$(c).focus()}}else{logConsole("Speech stopped.");stopSpeechRecognition();$(t).empty();$(n).empty()}}function openChat(){openDashboard();var e={center_desktop:true};updateTitle(e);var i="blank";var t="#blank_container";var n='<div id="blank_container" class="container content-container-fill"></div>';toggleView(t,n);$("#header_microphone").show();$("#header_plus").hide();$("#dialog_chat").show();$("#microphone_button").click(function(){if($("#microphone_burst").attr("class")){$("#microphone_burst").removeClass("burst-effect");toggleSpeech(activate=false)}else{$("#microphone_burst").addClass("burst-effect");toggleSpeech()}})}function openDashboard(){$("#landing_container").remove();$(".dashboard-view").each(function(e){if(!$(this).is(":visible")){$(this).show()}});$(".landing-view").each(function(e){if($(this).is(":visible")){$(this).hide()}});$(".header-border").addClass("navbar-border")}function landingView(){const e="#content";const i="#logo_button";const t='        <div id="landing_container">            <div id="center_middle" class="center-middle">                <div class="burst-effect">                    <a id="logo_button"><img src="/public/images/logo.svg" class="icon-thumb"></a>                </div>            </div>        </div>';$(e).html(t);$(".dashboard-view").each(function(e){if($(this).is(":visible")){$(this).hide()}});$(".landing-view").each(function(e){if(!$(this).is(":visible")){$(this).show()}});$(".header-border").removeClass("navbar-border");$(i).click(function(){openChat()})}function signOut(){for(var e=0;e<localStorage.length;++e){var i=localStorage.key(e);localStorage.removeItem(i)}logConsole("All records deleted from Local Storage.");stopSpeechRecognition();$("#dialog_chat").hide();$("#dialog_chat_message_box").empty();$("#dialog_chat_input_box").empty();$("#dialog_chat_submit_box").empty();$("#header_plus").hide();$("#header_microphone").hide();$("#microphone_button").off();$("#microphone_burst").removeClass("burst-effect");landingView()}var device_handlers={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,false);document.addEventListener("DOMContentLoaded",this.onDeviceReady,false)},bindHeaders:function(){$("#menu_button").click(function(){slideoutDialog("#dialog_menu","left")});menu_details={sections:[{actions:[{icon:"icon-bubbles",name:"Verification",onclick:"openChat",label:"Open Verification Menu"},{icon:"icon-user",name:"Trusted Sources",onclick:"openSources",label:"View Trusted Sources List"}]},{actions:[{icon:"icon-key",name:"Register Token",onclick:"registerDialog",label:"Register an Access Token"},{icon:"icon-doc",name:"Documentation",onclick:"openDocumentation",label:"View API Documentation"},{icon:"icon-logout",name:"Sign-Out",onclick:"signOut",label:"Sign Out from Laboratory"}]},{actions:[{icon:"icon-social-twitter",name:"Twitter",onclick:"open",args:["https://twitter.com/CollectiveAcuit"],label:"Open Twitter Page"},{icon:"icon-social-facebook",name:"Facebook",onclick:"open",args:["https://www.facebook.com/collectiveacuity/"],label:"Open Facebook Page"}]}]};menuBindings(menu_details);$("#info_button").click(function(){var e={title:"Mission",description:"Statement of purpose for the laboratory.",effective_date:"2016.05.31.13.45.55",author:"Collective Acuity",details:"To make accessible to each individual the resources of the world."};blockquoteDialog(e)});$("#header_title_text_mobile, #header_title_text_desktop").click(function(){$("html, body").animate({scrollTop:0},500)})},onDeviceOffline:function(){window.device_online=false;console.log("Device Offline")},onDeviceOnline:function(){window.device_online=true;console.log("Device Online")},constructWindow:function(){window.device_online=true;window.system_environment="dev";window.app_title="Origins Project";window.server_protocol=location.protocol;window.server_domain=document.domain;window.server_port=location.port;window.server_url=window.server_protocol+"//"+window.server_domain;if(window.server_port){window.server_url+=":"+window.server_port}},loadLibraries:function(){var e=new $.Deferred;var i=[];e.resolve();return e.promise()},openView:function(){var e=retrieveParams();if("view"in e){var i=e["view"];var t="";if("section"in e){t=e["section"]}if(i=="documentation"){openDocumentation(t)}}else{if(!$.trim($("#content").html())){landingView()}}},onDeviceReady:function(){device_handlers.constructWindow();device_handlers.bindHeaders();device_handlers.loadLibraries();device_handlers.openView();document.addEventListener("offline",device_handlers.onDeviceOffline,false);document.addEventListener("online",device_handlers.onDeviceOnline,false);console.log("Device Ready")}};device_handlers.initialize();